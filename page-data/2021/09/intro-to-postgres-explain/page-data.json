{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2021/09/intro-to-postgres-explain/","result":{"data":{"site":{"siteMetadata":{"repsitory":"https://github.com/tmr08c/tmr08c.github.io"}},"markdownRemark":{"id":"5b703b25-5da2-5985-8f5b-15c25682bac1","excerpt":"For most of the database performance work I have done, simply looking at the queries has been enough to identify the issue. However, I've been tempted by the…","html":"<p>For most of the database performance work I have done, simply looking at the queries has been enough to identify the issue. However, I've been tempted by the additional information that the <a href=\"https://www.postgresql.org/docs/current/using-explain.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code>EXPLAIN</code></a> function can provide. Unfortunately, I didn't understand the output of these queries and would inevitably go back to other avenues when debugging issues. I decided to change that and learn how to work with <code>EXPLAIN</code>.</p>\n<p>Please note, while other database management systems provide <code>EXPLAIN</code> functionality, it is not SQL standard. I will be focusing on how it works with PostgreSQL since that is what I use most often; you will want to read the documentation for your DBMS of choice if you work with a different system.</p>\n<h2 id=\"what-is-explain\" style=\"position:relative;\"><a href=\"#what-is-explain\" aria-label=\"what is explain permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is EXPLAIN</h2>\n<p>To start, <code>EXPLAIN</code> is a SQL function that, when given a query, will return the database's plan of how to fetch the data. It does <strong>not</strong> actually perform the query you pass into it.</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">EXPLAIN(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">SELECT</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">*</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">FROM</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> my_table</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">                            QUERY PLAN</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-3 grvsc-tJmpaV-3\">------------------------------------------------------------------</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> Seq Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> my_table  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">00</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">50</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">50</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1572</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">(</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">row</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span></code></pre>\n<p>You can think of the query plan as map directions. It includes the steps you will be taking to get your requested data from the database.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 359px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/07a59a002f3d157a5b2cb59210d694e5/f5eb6/real_directions.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 145.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAAAsTAAALEwEAmpwYAAADLElEQVRIx6VVW2sTURDe/6T1vbaoKN5efBMEUfA3WN+qeKmKLyJprej/sBdBKBQMppc0bWmT5tJkc9vsLZvsJp/nO9sTNukqjT0wmTlzZme/mW/2RJt6buPaKxuXhb760saN1zZuvbVx552w39i4+z60bwvfFXE+OWvJ2L+Jdl0kuP/RwfQLG/c+OHjwycGjeRcPE6E8XnDxZDG0GTsl4qb/IdrEjIULT01cembKt9+cEwjnQtRES5S0J2dtEWeJuFAmZkzw2VCbuEgt/NrCcgdff/TwZTXA4kqAxFIXiWU/1AO7g8T3DhhLmV/ysLjq4/NK90T7+PYT8kwDemh5Otp+E67fAPptwLcBeOJI2IEjbB+jq+sa4sw9EQe1cg7MpXV8H8lCGhk9i19CV+t1VCpVNI0W9GoN+UIRpmWj1xfPiZ8g6MuEhWIJ9YaBWr0ppIFk8jfankDY6/XgWg5s04IhAppNEVCrwTRNtFottNttmaDf7w/QRe3RpQVBIJDo0HVdvLGOarWKRqOBukBKXalUYFlWbNKoEBi1xh/P8yQSpbvd7ql9XJI40eLgj/oUgrOIxrcfHR0hn8/j4OAA5XI5Fs1Zl0yYyWSws7ODzc1NFItFeaB6Moouzqf8MiENEtPpdHDeJXtIgyzyLSyZ5edyOWkXCgUp9HGfzWblnlWoPVt1eHgIx3FChPxxXVcm5JgYhiGFY8NZVPOo/LTp47xS6ONzqsIBy6oP7Kkvvp5xiDhVMrMzYalUkl8Jh5maw07WiYCaiDj4PGcshZUonxybKClkeW9vD6lUCul0GltbW9jd3ZU29f7+vjxjHKdifX1dnm1sbOD4+Hi4ZDU+bDD7wj6xtySMyLhn49lD+mzblnHKR1CDhEp4wMBzjU2UFJbN75dvpR5nDV0Oilk2lgSwPJLAvnDm6CdB3FO4p6gYxg8hZDKiSiaT2N7elmRQk0E+QBZpk3na1FE7er0NSmZSBhAJtZr8cfo3+FLUYg/JLJORNfaFWtnR/ah/qIdMpAihjl5ZZ7lUhy5YJmDvKGtra3KAo4nGXfJPiiyxsZTodf9fCOOaG0027voDyRF946m3OaAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"map_directions\"\n        title=\"map_directions\"\n        src=\"/static/07a59a002f3d157a5b2cb59210d694e5/f5eb6/real_directions.png\"\n        srcset=\"/static/07a59a002f3d157a5b2cb59210d694e5/fac75/real_directions.png 125w,\n/static/07a59a002f3d157a5b2cb59210d694e5/63868/real_directions.png 250w,\n/static/07a59a002f3d157a5b2cb59210d694e5/f5eb6/real_directions.png 359w\"\n        sizes=\"(max-width: 359px) 100vw, 359px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>However, you will not be getting information about the distance before you turn left or how long you will be on a highway. Instead, you will get information about the steps involved in fetching your data and how much work will be done along the way.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 361px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ffb0632836fd31609775da118f860250/39d76/explain_directions.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 114.39999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAAsTAAALEwEAmpwYAAACRUlEQVQ4y5VTy27TQBT1NyGVBTtQAbFgwYIdov9RUYkFFCiBig39kDYSHwASRMCORUQU5d3YTpzEHsfx8zBnIluOyzTNSMfnznjmzn2cMe69Frj/RoD8QPKjdwKPa2tw7e4rT/FNYdDBwZmP/WOBp598PD9b49lnHw/fCrW+C4zbRx72jlyF/WMPT04F7rz0cOvQA//p4W7M916s58b7ixU+1CN8rMc4OQ8lItQuQnD95FyHADV5plYPC5x+SdUZA0gRpwJh4gIIEWdC8baRRnJfEgCZ3Jut4DqmXE1gBFGEn70/+Nr+hb9WF9/av9G2B8hSIIqTAkmaKdCWhMFwBNOyMZk6Ct9/NOAJH0aSJFj6S9imDUf+8BYuxuMxbFtunkxgmmbBlmVhNpshCAJt5EaaprDk4f5ggPl8jtFohMvxJbIs20xR7iPK67SrUA7paDqdFsyIaPu+D8/zlKPqqF64EaEQQjlYLBZwHEfZTM11XcUsiy6iKxHqbqpGk6e8DUYkuzyQ9et2u+j3+0WdtkHblDiO0ev1lMNOp4ObDm3K5U2UA+vIRrAhtFlfzsmsKcG5tsv8rFYrhGGooiRYAuqOTBkNh0OlTWbSarXUHm3KeT3IdErnLENukxktIyQ4L+uyjCJlyoLIpVNOmTb/8RKC9rWyoUPeSuTNYbeZMpnPbZdRNEW96eVSgc1hhGU7j5Yy0+nyirC5OU+LXJ2Tt+lU6bDRaKDZbF77RndKOa9hWVs6nf3vUu1bLh8op1Y9WN1TPvsPF4myiUMNmf4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"explain_directions\"\n        title=\"explain_directions\"\n        src=\"/static/ffb0632836fd31609775da118f860250/39d76/explain_directions.png\"\n        srcset=\"/static/ffb0632836fd31609775da118f860250/fac75/explain_directions.png 125w,\n/static/ffb0632836fd31609775da118f860250/63868/explain_directions.png 250w,\n/static/ffb0632836fd31609775da118f860250/39d76/explain_directions.png 361w\"\n        sizes=\"(max-width: 361px) 100vw, 361px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Our simple example above only has one step in our directions list – a sequential scan on <code>my_table</code>. Even for this single step, we get a lot of data about what will be happening.</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">Seq Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> my_table  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">00</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">50</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">50</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1572</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span></code></pre>\n<p>Let's break down what is involved in a row from the query planner.</p>\n<h2 id=\"reading-from-the-table\" style=\"position:relative;\"><a href=\"#reading-from-the-table\" aria-label=\"reading from the table permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reading from the Table</h2>\n<p>Our query plan indicates which table we will be reading data from and the method used to read said data.</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">Seq Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> my_table</span></span></span></code></pre>\n<p>In this example, we will be doing a sequential scan on <code>my_table</code>. A sequential scan requires reading each row in the table, one by one. Check out <a href=\"https://severalnines.com/database-blog/overview-various-scan-methods-postgresql\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">this post</a> for more information on the different types of table scans.</p>\n<h2 id=\"statistics-tuple\" style=\"position:relative;\"><a href=\"#statistics-tuple\" aria-label=\"statistics tuple permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Statistics Tuple</h2>\n<p>After the scan information, we have a tuple (<code>()</code>) of statistics. This includes <code>cost</code>, <code>rows</code>, and <code>width</code>.</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">(cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">00</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">50</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">50</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1572</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span></code></pre>\n<h3 id=\"cost\" style=\"position:relative;\"><a href=\"#cost\" aria-label=\"cost permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cost</h3>\n<p>First in our tuple is <code>cost</code>.</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">00</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">50</span></span></span></code></pre>\n<p>The <code>cost</code> contains two numbers; <code>0.00</code> and <code>10.50</code> in this case.</p>\n<h4 id=\"start-up\" style=\"position:relative;\"><a href=\"#start-up\" aria-label=\"start up permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Start-up</h4>\n<p>The first number is the <code>estimated start-up cost</code>; this is the cumulative cost <em>before</em> this step in the plan will run. In our example, the start-up cost is <code>0.00</code>. A start-up cost of <code>0.00</code> indicates that the step runs at the beginning of the query execution. Since we only have a single step in our example, it makes sense intuitively that it will run at the beginning of execution.</p>\n<p>Let's take a look at a slightly more complex query. In this example, our <code>WHERE</code> clause is filtering based on a subquery.</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">EXPLAIN(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">SELECT</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">*</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">FROM</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> chat_room_messages</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">WHERE</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> author </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">IN</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">    </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">SELECT</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> email</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">    </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">FROM</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> users</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">    </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">WHERE</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> updated_at </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&#39;2021-01-01&#39;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">::</span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">date</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">);</span></span></span></code></pre>\n<p>This results in a plan with multiple steps.</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">                                 QUERY PLAN</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-3 grvsc-tJmpaV-3\">-----------------------------------------------------------------------------</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Hash</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Join</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">84</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">22</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">49</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">17</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">580</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">   </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Hash</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> Cond: ((</span><span class=\"grvsc-t564vY-5 grvsc-tJmpaV-5\">chat_room_messages</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-5 grvsc-tJmpaV-5\">author</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)::</span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">text</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> (</span><span class=\"grvsc-t564vY-5 grvsc-tJmpaV-5\">users</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-5 grvsc-tJmpaV-5\">email</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)::</span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">text</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">   </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">-&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  Seq Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> chat_room_messages  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">00</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">11</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">30</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">130</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">580</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">   </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">-&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Hash</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">62</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">62</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">17</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">516</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">         </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">-&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  Seq Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> users  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">00</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">62</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">17</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">516</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">               </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Filter</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">: (updated_at </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&#39;2021-01-01&#39;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">::</span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">date</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span></code></pre>\n<p>As we said before, when the <code>estimated start-up cost</code> is <code>0.00</code>, it is an indication that that step is run at the beginning of execution. The plan above has <strong>two</strong> rows with <code>0.00</code> for the <code>estimated start-up cost</code>.</p>\n<pre class=\"grvsc-container grvsc-has-line-highlighting tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">                                 QUERY PLAN</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-3 grvsc-tJmpaV-3\">-----------------------------------------------------------------------------</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Hash</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Join</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">84</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">22</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">49</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">17</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">580</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">   </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Hash</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> Cond: ((</span><span class=\"grvsc-t564vY-5 grvsc-tJmpaV-5\">chat_room_messages</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-5 grvsc-tJmpaV-5\">author</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)::</span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">text</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> (</span><span class=\"grvsc-t564vY-5 grvsc-tJmpaV-5\">users</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-5 grvsc-tJmpaV-5\">email</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)::</span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">text</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line grvsc-line-highlighted\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">   </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">-&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  Seq Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> chat_room_messages  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">00</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">11</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">30</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">130</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">580</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">   </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">-&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Hash</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">62</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">62</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">17</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">516</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line grvsc-line-highlighted\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">         </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">-&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  Seq Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> users  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">00</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">62</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">17</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">516</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">               </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Filter</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">: (updated_at </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&#39;2021-01-01&#39;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">::</span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">date</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span></code></pre>\n<p>We have the sequential scan on the <code>chat_room_messages</code> table</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">-&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  Seq Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> chat_room_messages  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">00</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">11</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">30</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">130</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">580</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span></code></pre>\n<p>and we also have a sequential scan on the <code>users</code> table</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">-&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  Seq Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> users  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">00</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">62</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">17</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">516</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span></code></pre>\n<p>This is an indication we will start these two steps at the same time and run them in <strong>parallel</strong>.</p>\n<h4 id=\"total\" style=\"position:relative;\"><a href=\"#total\" aria-label=\"total permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Total</h4>\n<p>The second number in <code>cost</code> is the <code>estimated total cost</code>, the accumulated cost <em>after</em> the step completes.</p>\n<p>Together, the numbers in <code>cost</code> give us an idea of when the step will start and when it will end.</p>\n<h4 id=\"nesting\" style=\"position:relative;\"><a href=\"#nesting\" aria-label=\"nesting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nesting</h4>\n<p>Let's use what we know about <code>cost</code> to revisit our complex query plan.</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">-&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Hash</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">62</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">62</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">17</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">516</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">-&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  Seq Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> users  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">00</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">62</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">17</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">516</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">    </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Filter</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">: (updated_at </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&#39;2021-01-01&#39;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">::</span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">date</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span></code></pre>\n<p>Not only does this example have multiple steps, but it also has nested steps.</p>\n<p>To understand what runs first, we will rely on our knowledge that an <code>estimated start-up cost</code> of <code>0.00</code> means a step is run when execution starts. For the query above, <code>Seq Scan on users</code> has an <code>estimated start-up cost</code> of <code>0.00</code>; this means it runs first. It also has an <code>estimated total cost</code> of <code>10.62</code>.</p>\n<p>Moving onto the <code>Hash</code> line above, we see that its <code>estimated start-up cost</code> is <code>10.62</code>. This means that as soon as the <code>seq scan on users</code> completes, it will move on to the <code>Hash</code> step.</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">-&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Hash</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">62</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">62</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">17</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">516</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">-&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  Seq Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> users  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">00</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">62</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">17</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">516</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span></code></pre>\n<p>Through our understanding of the <code>cost</code> attribute, we have been able to piece together an understanding for one of the fundamental aspects of a query plan's layout - that it represents a tree-like structure where the leaf nodes (the most nested elements) are run first.</p>\n<p>You may be wondering about the <code>Filter</code> line. Note that it isn't prefixed with an <code>-></code>; this means that it isn't a separate step in our plan. Instead, it is a part of our scan on the <code>users</code> table. This means that <code>Seq Scan on users</code> is still our most nested step.</p>\n<h4 id=\"how-much\" style=\"position:relative;\"><a href=\"#how-much\" aria-label=\"how much permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How Much?</h4>\n<p>So far, we have covered what the two types of cost represent but not what the values represent. While we've talked about the <code>cost</code> as a sort of time-like measurement, it is not a representation of time. The unit used for <code>cost</code> is configurable but defaults to representing sequential page fetches. However, the units are arbitrary; what matters is the <em>relative</em> costs. From the <a href=\"https://www.postgresql.org/docs/current/runtime-config-query.html#RUNTIME-CONFIG-QUERY-CONSTANTS\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">postgreSQL documentation</a></p>\n<blockquote>\n<p>The cost variables described in this section are measured on an arbitrary\nscale. Only their relative values matter, hence scaling them all up or down by\nthe same factor will result in no change in the planner's choices</p>\n</blockquote>\n<p>So while you may want to track the cost in terms of sequential page fetches or base it on the CPU processing a tuple, what seems to be more important is comparing the numbers relative to other parts of the query plan (and other query plans).</p>\n<h3 id=\"rows\" style=\"position:relative;\"><a href=\"#rows\" aria-label=\"rows permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rows</h3>\n<p>The next part of our tuple is <code>rows</code>.</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">50</span></span></span></code></pre>\n<p><code>rows</code> represents the <strong>estimated</strong> number of rows that will be returned for a given step. Since <code>EXPLAIN</code> will not run the query, it cannot specify exact numbers. Instead, it uses statistics gathered from the <a href=\"https://www.postgresql.org/docs/current/sql-analyze.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code>ANALYZE</code></a> function and stored in a <a href=\"https://www.postgresql.org/docs/current/catalog-pg-statistic.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">special table</a>. Despite being an estimation, it can provide a ballpark of how much data you may be dealing with and how impactful a filter may be.</p>\n<h3 id=\"width\" style=\"position:relative;\"><a href=\"#width\" aria-label=\"width permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Width</h3>\n<p>The final element of the query plan tuple that we are going to cover is <code>width</code>.</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">Seq Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> my_table  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">00</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">50</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">50</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1572</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span></code></pre>\n<p>The <code>width</code> is the average width of the rows in bytes. More than just the number of columns selected, it gives you an idea of the average amount of data stored in those columns. Like <a href=\"#rows\">rows</a>, it is an estimation based on the statistics table.</p>\n<p>While you would expect that selecting fewer columns results in less data, <code>EXPLAIN</code> can help reveal which columns have the largest memory footprint. When we perform a <code>SELECT *</code> we see a much larger width than if we only <code>SELECT id</code>.</p>\n<pre class=\"grvsc-container grvsc-has-line-highlighting tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-3 grvsc-tJmpaV-3\">-- SELECT * has a width of 580</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"># EXPLAIN(</span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">SELECT</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">*</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">FROM</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> chat_room_messages);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">                              QUERY PLAN</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-3 grvsc-tJmpaV-3\">-----------------------------------------------------------------------</span></span></span>\n<span class=\"grvsc-line grvsc-line-highlighted\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> Seq Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> chat_room_messages  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">00</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">11</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">30</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">130</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">580</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">(</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">row</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-3 grvsc-tJmpaV-3\">-- SELECT id has a width of 8</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"># EXPLAIN(</span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">SELECT</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> id </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">FROM</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> chat_room_messages);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">                             QUERY PLAN</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-3 grvsc-tJmpaV-3\">---------------------------------------------------------------------</span></span></span>\n<span class=\"grvsc-line grvsc-line-highlighted\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> Seq Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> chat_room_messages  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">00</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">11</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">30</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">130</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">8</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">(</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">row</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span></code></pre>\n<h2 id=\"analyze\" style=\"position:relative;\"><a href=\"#analyze\" aria-label=\"analyze permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Analyze</h2>\n<p>As previously mentioned, <code>EXPLAIN</code> will not run the query you pass in. This is why we've been dealing with estimations so far. If you want to get more accurate performance information, you can use <code>EXPLAIN ANALYZE</code>. With <code>ANALYZE</code>, the query will <em>actually</em> be run, allowing the query plan to include information about run time, the actual number <code>row</code>s, and more.</p>\n<p>Let's take a look at one of our previous queries and include an <code>ANALYZE</code>.</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">EXPLAIN ANALYZE(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">SELECT</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">*</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">FROM</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> chat_room_messages</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">WHERE</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> author </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">IN</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">      </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">SELECT</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> email </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">FROM</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> users </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">WHERE</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> updated_at </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&#39;2021-01-01&#39;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">::</span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">date</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">                                                       QUERY PLAN</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-3 grvsc-tJmpaV-3\">------------------------------------------------------------------------------------------------------------------------</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Hash</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Join</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">84</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">22</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">49</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">17</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">580</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">) (actual </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">time</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">028</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">033</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> loops</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">   </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Hash</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> Cond: ((</span><span class=\"grvsc-t564vY-5 grvsc-tJmpaV-5\">chat_room_messages</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-5 grvsc-tJmpaV-5\">author</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)::</span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">text</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> (</span><span class=\"grvsc-t564vY-5 grvsc-tJmpaV-5\">users</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-5 grvsc-tJmpaV-5\">email</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)::</span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">text</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">   </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">-&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  Seq Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> chat_room_messages  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">00</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">11</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">30</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">130</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">580</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">) (actual </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">time</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">007</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">008</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> loops</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">   </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">-&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Hash</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">62</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">62</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">17</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">516</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">) (actual </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">time</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">009</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">009</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">2</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> loops</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">     Buckets: </span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1024</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Batches</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">: </span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  Memory Usage: 9kB</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">     </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">-&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  Seq Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> users  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">00</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">10</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">62</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">17</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">516</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">) (actual </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">time</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">005</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">005</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">2</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> loops</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">       </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Filter</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">: (updated_at </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&#39;2021-01-01&#39;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">::</span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">date</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> Planning </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Time</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">: </span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">104</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> ms</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> Execution </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Time</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">: </span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">050</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> ms</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">(</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">9</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span></code></pre>\n<p>While the overall plan is the same as before, we now have additional information next to our <code>cost</code>, <code>rows</code>, <code>width</code> tuple. This new tuple gives us our actual runtime statistics.</p>\n<p>In addition to our arbitrary units for <code>cost</code>, we now get <code>time</code> (in milliseconds). We also get to see the actual number of <code>rows</code> returned. We can see some steps where the planner was close (17 versus 10) and others less so (130 versus 10). These examples come from a small test database that is not getting regular <code>ANALYZE</code> runs; as a result, the previously mentioned statistics table used for estimations will be less helpful.</p>\n<p>We also have new information about our hash function (number buckets, amount of memory used) and the overall run time (planning versus actual execution).</p>\n<p><code>ANALYZE</code> provides valuable information on top of only using <code>EXPLAIN</code>. However, because it does require running the query, it will take longer. This extended runtime may make it difficult to use repeatedly for large queries.</p>\n<h2 id=\"caveats\" style=\"position:relative;\"><a href=\"#caveats\" aria-label=\"caveats permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Caveats</h2>\n<h3 id=\"matching-environments\" style=\"position:relative;\"><a href=\"#matching-environments\" aria-label=\"matching environments permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Matching Environments</h3>\n<p>The biggest caveat I took away from the documentation is that query plans are specific to the amount of data in the database. As a result, running an <code>EXPLAIN</code> locally with a small dataset may not reveal the steps the query planner will take on your production system.</p>\n<p>An example of how the planner will choose different routes is index utilization. With a small enough table, the query planner may prefer a sequential scan over leveraging an index. As a result, you may not be able to confirm the usage of a newly added index in your smaller development database.</p>\n<p>From what I can tell, the query plan is impacted primarily by the amount of data and not other factors like the underlying hardware. As a result, you should be able to get a better idea of production-like characteristics if you load your local database with enough data (if feasible). However, like many performance tuning tasks, you will ultimately want to validate on production.</p>\n<h3 id=\"reading-and-writing\" style=\"position:relative;\"><a href=\"#reading-and-writing\" aria-label=\"reading and writing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reading and Writing</h3>\n<p>Another thing to note is that plans focus on reading and do not include information about updates. In the example below, we run <code>EXPLAIN</code> on an <code>UPDATE</code> command.</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">EXPLAIN</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">UPDATE</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> chat_room_messages</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">SET</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> body </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&#39;this is an updated message&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">WHERE</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> id </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">                                                QUERY PLAN</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-3 grvsc-tJmpaV-3\">----------------------------------------------------------------------------------------------------------</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Update</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> chat_room_messages  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">14</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">8</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">16</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">586</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">   </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">-&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  Index Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">using</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> chat_room_messages_pkey </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> chat_room_messages  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">14</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">8</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">16</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">586</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">         Index Cond: (id </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">(</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">3</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span></code></pre>\n<p>The query plan includes information about scanning the table but does not include any <code>cost</code> information for performing the update itself.</p>\n<p>With <code>EXPLAIN ANALYZE</code>, the <code>actual time</code> shows a gap between the scan and the overall runtime, so you may be able to estimate how long the `UPDATE is taking.</p>\n<pre class=\"grvsc-container grvsc-has-line-highlighting tomorrow grvsc-ps-tJmpaV\" data-language=\"sql\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">                                                                     QUERY PLAN</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-3 grvsc-tJmpaV-3\">----------------------------------------------------------------------------------------------------------------------------------------------------</span></span></span>\n<span class=\"grvsc-line grvsc-line-highlighted\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Update</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> chat_room_messages  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">14</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">8</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">16</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">586</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">) (actual </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">time</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">055</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">055</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> loops</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line grvsc-line-highlighted\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">   </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">-&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  Index Scan </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">using</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> chat_room_messages_pkey </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">on</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> chat_room_messages  (cost</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">14</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">8</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">16</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> width</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">586</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">) (actual </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">time</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">021</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">..</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">022</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> loops</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">         Index Cond: (id </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">=</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">1</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> Planning </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Time</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">: </span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">064</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> ms</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> Execution </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">Time</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">: </span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">0</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">076</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> ms</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">(</span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">5</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">rows</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span></code></pre>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>Hopefully, this introduction will empower you to leverage the <code>EXPLAIN</code> function. If you find a confusing query plan or struggle to know how to leverage the query plan to do something actionable, remember this quote from the <a href=\"https://www.postgresql.org/docs/current/using-explain.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>Plan-reading is an art that requires some experience to master</p>\n</blockquote>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .tomorrow {\n    background-color: #FFFFFF;\n    color: #4D4D4C;\n  }\n  .tomorrow .grvsc-t564vY-1 { color: #4D4D4C; }\n  .tomorrow .grvsc-t564vY-11 { color: #8959A8; }\n  .tomorrow .grvsc-t564vY-6 { color: #3E999F; }\n  .tomorrow .grvsc-t564vY-3 { color: #8E908C; }\n  .tomorrow .grvsc-t564vY-4 { color: #F5871F; }\n  .tomorrow .grvsc-t564vY-7 { color: #718C00; }\n  .tomorrow .grvsc-t564vY-5 { color: #666969; }\n  .tomorrow .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n  body.dark .grvsc-ps-tJmpaV {\n    background-color: #1D1F21;\n    color: #C5C8C6;\n  }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-1 { color: #C5C8C6; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-11 { color: #B294BB; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-6 { color: #8ABEB7; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-3 { color: #969896; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-4 { color: #DE935F; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-7 { color: #B5BD68; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-5 { color: #CED1CF; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","frontmatter":{"title":"Intro to Postgre EXPLAIN","date":"September 30, 2021"}}},"pageContext":{"slug":"/2021/09/intro-to-postgres-explain/","previous":{"fields":{"slug":"/2021/08/adding-randomness-to-test-data/"},"frontmatter":{"title":"Adding Randomness to Test Data"}},"next":{"fields":{"slug":"/2021/10/using-mix-install-for-benchmarks/"},"frontmatter":{"title":"Using Mix.install for Benchmarks"}}}},"staticQueryHashes":["3128451518","3649515864"]}