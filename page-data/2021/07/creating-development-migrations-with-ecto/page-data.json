{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2021/07/creating-development-migrations-with-ecto/","result":{"data":{"site":{"siteMetadata":{"repsitory":"https://github.com/tmr08c/tmr08c.github.io"}},"markdownRemark":{"id":"0e8d1715-0d4b-5ab4-bc0c-cc4588b8fee7","excerpt":"Inspired by the setup script used by my previous team and GitHub's Scripts To Rule Them All repository, I recently set out to create a setup script (and othersâ€¦","html":"<p>Inspired by the <code>setup</code> script used by my previous team and GitHub's <a href=\"https://github.com/github/scripts-to-rule-them-all\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Scripts To Rule Them All</a> repository, I recently set out to create a <a href=\"https://github.com/github/scripts-to-rule-them-all#scriptsetup\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code>setup</code></a> script (and others) for a greenfield <a href=\"https://changelog.com/posts/petal-the-end-to-end-web-stack\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">PETAL stack</a> application.</p>\n<p>When creating the scripts, I hit an issue automating the process of adding <a href=\"https://www.postgresql.org/docs/current/external-extensions.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">PostgreSQL Extensions</a>. While it's relatively easy to add an extension to PostgreSQL (see <a href=\"https://www.postgresql.org/docs/current/sql-createextension.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code>CREATE EXTENSION</code></a>), doing this in an <a href=\"https://hexdocs.pm/ecto_sql/Ecto.Migration.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code>Ecto.Migration</code></a> wouldn't work for us. In following the <a href=\"https://en.wikipedia.org/wiki/Principle_of_least_privilege\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">principle of least privilege</a>, the Postgres role/user used in deployment does not have the access required to run the <code>CREATE EXTENSION</code> query; this means creating extensions in a migration would not work when running in our production environment.</p>\n<p>I started my <code>setup</code> script journey by replicating the manual extension creation workflow. To do this, I used the <code>--command</code> flag with the <a href=\"https://www.postgresql.org/docs/current/app-psql.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code>psql</code></a> command-line tool to run our specified queries.</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"bash\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-3 grvsc-tJmpaV-3\"># script/setup</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">mix ecto.create</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">psql --command=</span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&quot;CREATE EXTENSION IF NOT EXIST my_extension&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">mix ecto.migrate</span></span></span></code></pre>\n<p>While we eventually got something that worked, it was brittle. It required using our new scripts and didn't work well with other <code>mix ecto</code> aliases.</p>\n<p>As I was about to call it \"good enough for now,\" I found the post, <a href=\"https://dashbit.co/blog/automatic-and-manual-ecto-migrations\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><em>Automatic and Manual Migrations</em></a> on the Dashbit blog. The post describes scenarios in which you may want to leverage Ecto's migrations but not have them automatically run as a part of your deployment. They accomplished this using the <code>--migrations-path</code> flag for <code>mix ecto.migrate</code>.</p>\n<p>The <code>--migrations-path</code> option enables you to look in a different directory for migration files. Thanks to <a href=\"https://github.com/elixir-ecto/ecto_sql/blob/master/CHANGELOG.md#v340-2020-03-24\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code>ecto_sql</code> 3.4</a>, this flag can be included multiple times to specify <em>multiple paths</em> to search. Furthermore, we can utilize the flag differently in different environments. In production, we can limit our migrations to the default <code>priv/repo/migrations</code> path, and, in development and testing, we can look in an additional location. In the post, this enabled automatically running \"data migration\" migrations in development and testing while providing the ability to run them manually in production. We could follow this same pattern to have migrations that \"set up\" our database in development and testing and ignore them in production.</p>\n<p>Using this concept as the model, I generated a migration that would set up the extensions we needed and used the <code>--migrations-path</code> to specify an alternative location to store the new migration file (I chose <code>priv/repo/setup_migrations</code>).</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"bash\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">mix ecto.gen.migration \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  --migrations-path=priv/repo/setup_migrations \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  create_necessary_extension</span></span></span></code></pre>\n<p>Within the migration itself, I used the same <code>CREATE EXTENTION IF NOT EXIST</code> syntax.</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"elixir\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">defmodule</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> MyApp.Repo.Migrations.CreateNecessaryExtension </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-10 grvsc-tJmpaV-10\">use</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-8 grvsc-tJmpaV-8\">Ecto</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">.</span><span class=\"grvsc-t564vY-8 grvsc-tJmpaV-8\">Migration</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">def</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-10 grvsc-tJmpaV-10\">up</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">    execute(</span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&quot;CREATE EXTENSION IF NOT EXISTS my_extension&quot;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">def</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-10 grvsc-tJmpaV-10\">down</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">    execute(</span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&quot;DROP EXTENSION IF EXISTS my_extension&quot;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">end</span></span></span></code></pre>\n<p><em>Note: because we had migrations that relied on the extension existing, I also had to update the generated migration to have a timestamp that was earlier than the dependent migrations.</em></p>\n<p>To run these migrations I copied the blog post and added a <code>migrate_all</code> alias to our <code>mix.exs</code> aliases list. I then updated our <code>setup</code> and <code>test</code> aliases to use this new <code>migrate_all</code> action.</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"elixir\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-3 grvsc-tJmpaV-3\"># mix.exs</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">defp</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> </span><span class=\"grvsc-t564vY-10 grvsc-tJmpaV-10\">aliases</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">    </span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">&quot;ecto.migrate_all&quot;:</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">        </span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&quot;ecto.migrate \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">            --migrations-path=priv/repo/setup_migrations \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">            --migrations-path=priv/repo/migrations&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">    ],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">    </span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">&quot;ecto.setup&quot;:</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">      </span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&quot;ecto.create&quot;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">      </span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&quot;ecto.migrate_all&quot;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">      </span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&quot;run priv/repo/seeds.exs&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">    ],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">    </span><span class=\"grvsc-t564vY-4 grvsc-tJmpaV-4\">test:</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">      </span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&quot;ecto.create --quiet&quot;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">      </span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&quot;ecto.migrate_all --quiet&quot;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">      </span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&quot;test&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">    ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">end</span></span></span></code></pre>\n<p>Since our <code>setup</code> script was previously using <code>ecto.create</code> and <code>ecto.migrate</code>, I updated it to use the updated <code>ecto.setup</code> alias instead.</p>\n<pre class=\"grvsc-container grvsc-has-line-highlighting tomorrow grvsc-ps-tJmpaV\" data-language=\"\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"># script/setup</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-del\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-del\" aria-hidden=\"true\" data-content=\"-\"></span><span class=\"grvsc-source\">mix ecto.create</span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-del\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-del\" aria-hidden=\"true\" data-content=\"-\"></span><span class=\"grvsc-source\">psql --command=&quot;CREATE EXTENSION IF NOT EXIST my_extension&quot;</span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-del\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-del\" aria-hidden=\"true\" data-content=\"-\"></span><span class=\"grvsc-source\">mix ecto.migrate</span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\">mix ecto.setup</span></span></code></pre>\n<p>Since it will be uncommon to add setup migrations, one concern I have is forgetting to use <code>mix ecto.migrate_all</code> over the default <code>mix ecto.migrate</code>. If we do not use the <code>migrate_all</code> alias, our development environments will miss out on any new \"set up\" migrations.</p>\n<p>A low-cost solution may be to communicate the need to run <code>mix ecto.migrate_all</code> to the team; this could be a note in the PR, a mention during standup, or a note in chat. While not ideal, I expect this will be rare enough to be sustainable.</p>\n<p>Alternatively, if you are following GitHub's <a href=\"https://github.com/github/scripts-to-rule-them-all\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Scripts To Rule Them All</a> pattern (or something similar), you may have another option - you could update the script(s) you have to run migrations to use <code>mix ecto.migrate_all</code>. Following GitHub's pattern, <a href=\"https://github.com/github/scripts-to-rule-them-all#scriptupdate\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code>script/update</code></a> is the suggested place to run migrations after pulling down new code. If your team already has a similar script, you should be able to transparently change from <code>mix ecto.migrate</code> to <code>mix ecto.migrate_all</code>.</p>\n<pre class=\"grvsc-container grvsc-has-line-highlighting tomorrow grvsc-ps-tJmpaV\" data-language=\"\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"># script/update</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\">script/bootstrap</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\">echo &quot;==&gt; Updating db...&quot;</span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-del\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-del\" aria-hidden=\"true\" data-content=\"-\"></span><span class=\"grvsc-source\">mix ecto.migrate</span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\">mix ecto.migrate_all</span></span></code></pre>\n<p>Overall, I am optimistic about this solution. I think this achieves my goal of easy project setup while having low long-term project maintenance requirements.</p>\n<p>How does your team provide an easy setup (and environment maintenance) experience for everyone? While I am happy with the solution so far, we haven't onboarded enough people to claim success. Please reach out and share alternative options that would improve our new process.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .tomorrow {\n    background-color: #FFFFFF;\n    color: #4D4D4C;\n  }\n  .tomorrow .grvsc-t564vY-3 { color: #8E908C; }\n  .tomorrow .grvsc-t564vY-1 { color: #4D4D4C; }\n  .tomorrow .grvsc-t564vY-7 { color: #718C00; }\n  .tomorrow .grvsc-t564vY-11 { color: #8959A8; }\n  .tomorrow .grvsc-t564vY-10 { color: #4271AE; }\n  .tomorrow .grvsc-t564vY-8 { color: #C82829; }\n  .tomorrow .grvsc-t564vY-4 { color: #F5871F; }\n  .tomorrow .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n  body.dark .grvsc-ps-tJmpaV {\n    background-color: #1D1F21;\n    color: #C5C8C6;\n  }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-3 { color: #969896; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-1 { color: #C5C8C6; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-7 { color: #B5BD68; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-11 { color: #B294BB; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-10 { color: #81A2BE; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-8 { color: #CC6666; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-4 { color: #DE935F; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","frontmatter":{"title":"Creating Development-Specific Migrations with Ecto","date":"July 31, 2021"}}},"pageContext":{"slug":"/2021/07/creating-development-migrations-with-ecto/","previous":{"fields":{"slug":"/2021/06/more-specific-factories-with-traits/"},"frontmatter":{"title":"Creating More Specific Factories with Traits"}},"next":{"fields":{"slug":"/2021/08/adding-randomness-to-test-data/"},"frontmatter":{"title":"Adding Randomness to Test Data"}}}},"staticQueryHashes":["3128451518","3649515864"]}