{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2019/04/golang-fass/","result":{"data":{"site":{"siteMetadata":{"repsitory":"https://github.com/tmr08c/tmr08c.github.io"}},"markdownRemark":{"id":"ac1c7b3e-a3a8-58c7-8557-d16f28c72683","excerpt":"This post covers building a function as a service using: golang - I've been interested in playing around with golang and thought this would be a simple way toâ€¦","html":"<p>This post covers building a <a href=\"https://en.wikipedia.org/wiki/Function_as_a_service\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">function as a service</a> using:</p>\n<ul>\n<li><a href=\"https://golang.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">golang</a> - I've been interested in playing around with golang and thought this would be a simple way to start.</li>\n<li><a href=\"https://serverless.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">serverless framework</a> - We've had luck with the serverless framework at work and it seemed like a good way to get started with a new language since they have templates and tutorials.</li>\n<li><a href=\"https://cloud.google.com/functions/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Google Cloud Function</a> - I'm assuming Google has good support for golang, and I have some Google cloud credits from playing around with some <a href=\"https://about.gitlab.com/solutions/google-cloud-platform/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Gitlab integrations</a>.</li>\n</ul>\n<h2 id=\"setup\" style=\"position:relative;\"><a href=\"#setup\" aria-label=\"setup permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup</h2>\n<h3 id=\"install-serverless\" style=\"position:relative;\"><a href=\"#install-serverless\" aria-label=\"install serverless permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install Serverless</h3>\n<p>I followed <a href=\"https://serverless.com/framework/docs/providers/google/guide/installation/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">serverless' guide</a> for getting set up with serverless and Google cloud:</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"bash\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">npm install -g serverless</span></span></span></code></pre>\n<h3 id=\"create-a-project\" style=\"position:relative;\"><a href=\"#create-a-project\" aria-label=\"create a project permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create a project</h3>\n<p>Running <code>serverless create</code> creates a new function, but it is expected to be run in an existing project directory, so you need to first create a new project directory:</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"bash\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">mkdir serverless-golang-sample</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-10 grvsc-tJmpaV-10\">cd</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> serverless-golang-sample</span></span></span></code></pre>\n<p>With the project directory created, we can now use one of <a href=\"https://serverless.com/framework/docs/providers/google/cli-reference/create/#available-templates\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">serverless' templates</a> to create a starter golang service:</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"bash\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">serverless create --template google-go --name hello-blog-service</span></span></span></code></pre>\n<h3 id=\"setting-up-google-cloud\" style=\"position:relative;\"><a href=\"#setting-up-google-cloud\" aria-label=\"setting up google cloud permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up Google Cloud</h3>\n<p>If you haven't already, Google is usually giving away credits to trial Google cloud. At the time of writing, they are giving $300 in credits. You can sign up and get credits <a href=\"https://cloud.google.com/free/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>.</p>\n<p>When checking out the template created by <code>serverless</code> I found this following interesting comments in <code>serverless.yml</code>:</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"yml\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-3 grvsc-tJmpaV-3\"># The GCF credentials can be a little tricky to set up. Luckily we&#39;ve documented this for you here:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-3 grvsc-tJmpaV-3\"># https://serverless.com/framework/docs/providers/google/guide/credentials/</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-3 grvsc-tJmpaV-3\">#</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-3 grvsc-tJmpaV-3\"># the path to the credentials file needs to be absolute</span></span></span></code></pre>\n<p>It's not too bad, but there are a bunch of steps that involve clicking around the interface. I'm sure these steps will change, and their guide will stay more up-to-date than this post, so you should follow it:</p>\n<p><a href=\"\">https://serverless.com/framework/docs/providers/google/guide/credentials/</a></p>\n<p>The <code>serverless</code> template leverages Google <a href=\"https://cloud.google.com/sdk/docs/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code>gcloud</code> CLI</a> for deploying and interacting the Google's cloud. Similar to the above, you should follow the instructions on the site:</p>\n<p><a href=\"\">https://cloud.google.com/sdk/docs/</a></p>\n<h2 id=\"deploy\" style=\"position:relative;\"><a href=\"#deploy\" aria-label=\"deploy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploy</h2>\n<p>The template generated by <code>serverless</code> has all the code you need to deploy a \"hello, world\" Cloud Function! Now that we are set up, we can already deploy, no code changes needed.</p>\n<p>The <code>Makefile</code> included had a <a href=\"https://www.gnu.org/software/make/manual/html_node/Phony-Targets.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">phony target</a>, <code>deploy</code>, that will, as the name suggests, deploy the function to Google's Cloud Function service.</p>\n<p>You should see some output like:</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">gcloud functions deploy hello --entry-point Hello --runtime go111 --trigger-http</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Created .gcloudignore file. See `gcloud topic gcloudignore` for details.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Deploying function (may take a while - up to 2 minutes)...done.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">availableMemoryMb: 256</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">entryPoint: Hello</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">httpsTrigger:</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  url: https://us-central1-testing-cloud-function-237501.cloudfunctions.net/hello</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">labels:</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  deployment-tool: cli-gcloud</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">name: projects/testing-cloud-function-237501/locations/us-central1/functions/hello</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">runtime: go111</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">status: ACTIVE</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">timeout: 60s</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">updateTime: &#39;2019-04-13T02:11:56Z&#39;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">versionId: &#39;1&#39;</span></span></code></pre>\n<p>The thing to look for is the <code>url</code> key. This is the URL you can use to trigger your cloud function:</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"bash\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">curl https://us-central1-testing-cloud-function-237501.cloudfunctions.net/hello</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">Hello, someone</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">!</span></span></span></code></pre>\n<p>This template even takes a query parameter to customize the output:</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"bash\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">curl https://us-central1-testing-cloud-function-237501.cloudfunctions.net/hello</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">?</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">name=reader</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">Hello, reader</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">!</span></span></span></code></pre>\n<h2 id=\"does-it-scale\" style=\"position:relative;\"><a href=\"#does-it-scale\" aria-label=\"does it scale permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Does it scale?</h2>\n<p>One of the major selling points of functions as a service is that the cloud provider will scale your function as much as you need so it can help as much traffic as you throw at it.</p>\n<p>Using <a href=\"https://github.com/wg/wrk\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code>wrk</code></a>, you can send a large number of HTTP requests at your new endpoint.</p>\n<p>By default <code>wrk</code>'s <a href=\"https://github.com/wg/wrk/issues/177#issuecomment-153711936\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">timeout is two seconds</a>. With this setting, I was running into some socket connection timeouts. Based on the Cloud Function's interface, the default timeout is one-minute. After increasing the timeout in <code>wrk</code> to <code>55s</code>, this socket connection went away. My guess is that when needing to scale quickly, it will take more than two seconds for some new function invocations to be spun up. I noticed when running the same test a few times, the timeouts would go down, which lines up with the idea that some function instances are still around, so we don't have to pay the cold start price.</p>\n<p>Because I just wanted to see a lot of requests and no sad disconnections, I eventually went with:</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">wrk --connections 1000 --threads 8 --timeout 55s --duration 120s  https://us-central1-testing-cloud-function-237501.cloudfunctions.net/hello</span></span></code></pre>\n<p>which resulted in:</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">Running 2m test @ https://us-central1-testing-cloud-function-237501.cloudfunctions.net/hello</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  8 threads and 1000 connections</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    Latency   265.72ms  301.77ms   6.30s    90.93%</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    Req/Sec   595.25    124.74     1.25k    71.57%</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  564009 requests in 2.00m, 162.44MB read</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Requests/sec:   4696.14</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Transfer/sec:      1.35MB</span></span></code></pre>\n<p>It seems to have scaled up to handle half a million requests with no non-200 response and no timeout issues (given a one-minute timeout).</p>\n<p>I'd be interested in seeing how different platforms and different languages compare, but, regardless, it was super easy to set up, and I got to see some fun graphs out of it:</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 376px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/60ce37135c8946c753459f48cf8961a0/d38a6/google-cloud-function-scaling.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 63.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABK0lEQVQ4y6WTS3LDIBBEuf/tssgJkoVLki3+Pwk6M2ASOVnYjlXVxaCCRzMziFIKhvZ9x3H+jMZegRe+ejOpHWiMgZSyaV1XWGufBhci5607FSklOOeQc27ato0Oq3dViOJTbT5tLFj0zmiIGCPmeW707rzezVetpTladI/TxvAeixBCA3JSH4ENIANM+AE6confQL7Go0AGMJDnHLPjWq7AaZq+r3xbu9qq90fgK4KAfRXHw4zIObUKu5ihXIT2EcoGrMa32NJ/G66i2ARa7wLlz9IaB2kjJmmQiMMpE8eekkpDaY2VDljOZzjvW0vs3LgHbSSpJLRWNCpMlLIYQwe+fSqclxmn06m1zL+bfDT2x/SOy2WFDx4vvZoBrMERLDR3XGken9XYx+MXZL7/8OpUDvEAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"google cloud function scaling\" title=\"google cloud function scaling\" src=\"/static/60ce37135c8946c753459f48cf8961a0/d38a6/google-cloud-function-scaling.png\" srcset=\"/static/60ce37135c8946c753459f48cf8961a0/fac75/google-cloud-function-scaling.png 125w,\n/static/60ce37135c8946c753459f48cf8961a0/63868/google-cloud-function-scaling.png 250w,\n/static/60ce37135c8946c753459f48cf8961a0/d38a6/google-cloud-function-scaling.png 376w\" sizes=\"(max-width: 376px) 100vw, 376px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n<h2 id=\"cleaning-up\" style=\"position:relative;\"><a href=\"#cleaning-up\" aria-label=\"cleaning up permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cleaning Up</h2>\n<p>Also included in the <code>Makefile</code> is a <code>delete</code> task. I thought it would be good for me to run this since I have my function's URL pasted a bunch of times throughout this post ðŸ™ƒ.</p>\n<p>When I tried to run <code>make delete</code> initially, I ran into errors about unknown arguments:</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"bash\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">ERROR: (gcloud.functions.delete) unrecognized arguments:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  --entry-point</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  Hello</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  --runtime (did you mean </span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&#39;--quiet&#39;</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">?</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  go111</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  --trigger-http (did you mean </span><span class=\"grvsc-t564vY-7 grvsc-tJmpaV-7\">&#39;--log-http&#39;</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">?</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  To search the </span><span class=\"grvsc-t564vY-10 grvsc-tJmpaV-10\">help</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> text of gcloud commands, run:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  gcloud </span><span class=\"grvsc-t564vY-10 grvsc-tJmpaV-10\">help</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> -- SEARCH_TERMS</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">make: </span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">***</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> [delete] Error 2</span></span></span></code></pre>\n<p>I updated the call to have no arguments,</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"bash\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">gcloud functions delete hello</span></span></span></code></pre>\n<p>and it worked fine:</p>\n<pre class=\"grvsc-container tomorrow grvsc-ps-tJmpaV\" data-language=\"bash\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">&gt;</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> make delete</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">gcloud functions delete hello</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">Resource [projects/testing-cloud-function-237501/locations/us-central1</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">/functions/hello] will be deleted.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">Do you want to </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">continue</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> (Y/n)</span><span class=\"grvsc-t564vY-6 grvsc-tJmpaV-6\">?</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">  y</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">Waiting </span><span class=\"grvsc-t564vY-11 grvsc-tJmpaV-11\">for</span><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\"> operation to finish...done.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-t564vY-1 grvsc-tJmpaV-1\">Deleted [projects/testing-cloud-function-237501/locations/us-central1/functions/hello].</span></span></span></code></pre>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>While this post is essentially a list of HOWTO links and some commentary, I hope it illustrates just how easy (and fun!) it can be to get set up with serverless.</p>\n<p>If you're interested, take a look at the code <a href=\"https://github.com/tmr08c/serverless-gcloud-go-demo\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">on Github</a>.</p>\n<p>Don't like golang? Don't want to support Google's cloud? No problem! Serverless supports multiple <a href=\"https://serverless.com/framework/docs/providers/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">providers</a> which all have their various language support.</p>\n<p>I am very excited about the serverless future and am interested in the ideas around architecting systems leveraging functions as a service. In the meantime, I'm enjoying making hundreds of thousands of \"hello, world\" HTTP calls with so little work.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .tomorrow {\n    background-color: #FFFFFF;\n    color: #4D4D4C;\n  }\n  .tomorrow .grvsc-t564vY-1 { color: #4D4D4C; }\n  .tomorrow .grvsc-t564vY-10 { color: #4271AE; }\n  .tomorrow .grvsc-t564vY-3 { color: #8E908C; }\n  .tomorrow .grvsc-t564vY-6 { color: #3E999F; }\n  .tomorrow .grvsc-t564vY-7 { color: #718C00; }\n  .tomorrow .grvsc-t564vY-11 { color: #8959A8; }\n  .tomorrow .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n  body.dark .grvsc-ps-tJmpaV {\n    background-color: #1D1F21;\n    color: #C5C8C6;\n  }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-1 { color: #C5C8C6; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-10 { color: #81A2BE; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-3 { color: #969896; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-6 { color: #8ABEB7; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-7 { color: #B5BD68; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-11 { color: #B294BB; }\n  body.dark .grvsc-ps-tJmpaV .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","frontmatter":{"title":"Deploying a Simple Go FaaS","date":"April 12, 2019"}}},"pageContext":{"slug":"/2019/04/golang-fass/","previous":{"fields":{"slug":"/2018/10/hacktoberfest-2018/"},"frontmatter":{"title":"Hacktoberfest 2018"}},"next":{"fields":{"slug":"/2020/04/how-i-debug-my-dependencies/"},"frontmatter":{"title":"How I Debug My Dependencies"}}}},"staticQueryHashes":["3128451518","3649515864"]}