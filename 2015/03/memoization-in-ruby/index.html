<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.3881677f45ebbfb10fde.css" id="gatsby-global-css">/*! tailwindcss v2.2.7 | MIT License | https://tailwindcss.com
 */

/*! modern-normalize v1.1.0 | MIT License | https://github.com/sindresorhus/modern-normalize */html{-moz-tab-size:4;tab-size:4;line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji}hr{height:0;color:inherit}abbr[title]{text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}button{-webkit-appearance:button}legend{padding:0}progress{vertical-align:baseline}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}body{font-family:inherit;line-height:inherit}*,:after,:before{box-sizing:border-box;border:0 solid}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#a1a1aa}button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}*,:after,:before{--tw-border-opacity:1;border-color:rgba(228,228,231,var(--tw-border-opacity))}.prose{color:#3f3f46;max-width:65ch}.prose a{color:#18181b;text-decoration:underline;font-weight:500}.prose a:hover{color:#c084fc}.prose strong{color:#18181b;font-weight:600}.prose ol>li{position:relative;padding-left:1.75em}.prose ol>li:before{content:counter(list-item,var(--list-counter-style,decimal)) ".";position:absolute;font-weight:400;color:#71717a;left:0}.prose ul>li{position:relative;padding-left:1.75em}.prose ul>li:before{content:"";position:absolute;background-color:#d4d4d8;border-radius:50%;width:.375em;height:.375em;top:.6875em;left:.25em}.prose hr{border-color:#e4e4e7;border-top-width:1px;margin-top:3em;margin-bottom:3em}.prose blockquote{font-weight:500;font-style:italic;color:#18181b;border-left-width:.25rem;border-left-color:#e4e4e7;quotes:"\201C""\201D""\2018""\2019";margin-top:1.6em;margin-bottom:1.6em;padding-left:1em}.prose blockquote p:first-of-type:before{content:open-quote}.prose blockquote p:last-of-type:after{content:close-quote}.prose h1{color:#18181b;font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:.8888889em;line-height:1.1111111}.prose h2{color:#18181b;font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.prose h3{font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6}.prose h3,.prose h4{color:#18181b;font-weight:600}.prose h4{margin-top:1.5em;margin-bottom:.5em;line-height:1.5}.prose figure figcaption{color:#71717a;font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.prose code{color:#18181b;font-weight:600;font-size:.875em}.prose code:after,.prose code:before{content:"`"}.prose a code{color:#18181b}.prose pre code{background-color:transparent;border-width:0;border-radius:0;padding:0;font-weight:400;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit}.prose pre code:after,.prose pre code:before{content:none}.prose table{width:100%;table-layout:auto;text-align:left;margin-top:2em;margin-bottom:2em;font-size:.875em;line-height:1.7142857}.prose thead{color:#18181b;font-weight:600;border-bottom-width:1px;border-bottom-color:#d4d4d8}.prose thead th{vertical-align:bottom;padding-right:.5714286em;padding-bottom:.5714286em;padding-left:.5714286em}.prose tbody tr{border-bottom-width:1px;border-bottom-color:#e4e4e7}.prose tbody tr:last-child{border-bottom-width:0}.prose tbody td{vertical-align:top;padding:.5714286em}.prose{font-size:1rem;line-height:1.75}.prose p{margin-top:1.25em;margin-bottom:1.25em}.prose figure,.prose img,.prose video{margin-top:2em;margin-bottom:2em}.prose figure>*{margin-top:0;margin-bottom:0}.prose h2 code{font-size:.875em}.prose h3 code{font-size:.9em}.prose ol,.prose ul{margin-top:1.25em;margin-bottom:1.25em}.prose li{margin-top:.5em;margin-bottom:.5em}.prose>ul>li p{margin-top:.75em;margin-bottom:.75em}.prose>ul>li>:first-child{margin-top:1.25em}.prose>ul>li>:last-child{margin-bottom:1.25em}.prose>ol>li>:first-child{margin-top:1.25em}.prose>ol>li>:last-child{margin-bottom:1.25em}.prose ol ol,.prose ol ul,.prose ul ol,.prose ul ul{margin-top:.75em;margin-bottom:.75em}.prose h2+*,.prose h3+*,.prose h4+*,.prose hr+*{margin-top:0}.prose thead th:first-child{padding-left:0}.prose thead th:last-child{padding-right:0}.prose tbody td:first-child{padding-left:0}.prose tbody td:last-child{padding-right:0}.prose>:first-child{margin-top:0}.prose>:last-child{margin-bottom:0}.prose-sm{font-size:.875rem;line-height:1.7142857}.prose-sm p{margin-top:1.1428571em;margin-bottom:1.1428571em}.prose-sm blockquote{margin-top:1.3333333em;margin-bottom:1.3333333em;padding-left:1.1111111em}.prose-sm h1{font-size:2.1428571em;margin-top:0;margin-bottom:.8em;line-height:1.2}.prose-sm h2{font-size:1.4285714em;margin-top:1.6em;margin-bottom:.8em;line-height:1.4}.prose-sm h3{font-size:1.2857143em;margin-top:1.5555556em;margin-bottom:.4444444em;line-height:1.5555556}.prose-sm h4{margin-top:1.4285714em;margin-bottom:.5714286em;line-height:1.4285714}.prose-sm figure,.prose-sm img,.prose-sm video{margin-top:1.7142857em;margin-bottom:1.7142857em}.prose-sm figure>*{margin-top:0;margin-bottom:0}.prose-sm figure figcaption{font-size:.8571429em;line-height:1.3333333;margin-top:.6666667em}.prose-sm code{font-size:.8571429em}.prose-sm h2 code{font-size:.9em}.prose-sm h3 code{font-size:.8888889em}.prose-sm pre{font-size:.8571429em;line-height:1.6666667;margin-top:1.6666667em;margin-bottom:1.6666667em;border-radius:.25rem;padding:.6666667em 1em}.prose-sm ol,.prose-sm ul{margin-top:1.1428571em;margin-bottom:1.1428571em}.prose-sm li{margin-top:.2857143em;margin-bottom:.2857143em}.prose-sm ol>li{padding-left:1.5714286em}.prose-sm ol>li:before{left:0}.prose-sm ul>li{padding-left:1.5714286em}.prose-sm ul>li:before{height:.3571429em;width:.3571429em;top:.67857em;left:.2142857em}.prose-sm>ul>li p{margin-top:.5714286em;margin-bottom:.5714286em}.prose-sm>ul>li>:first-child{margin-top:1.1428571em}.prose-sm>ul>li>:last-child{margin-bottom:1.1428571em}.prose-sm>ol>li>:first-child{margin-top:1.1428571em}.prose-sm>ol>li>:last-child{margin-bottom:1.1428571em}.prose-sm ol ol,.prose-sm ol ul,.prose-sm ul ol,.prose-sm ul ul{margin-top:.5714286em;margin-bottom:.5714286em}.prose-sm hr{margin-top:2.8571429em;margin-bottom:2.8571429em}.prose-sm h2+*,.prose-sm h3+*,.prose-sm h4+*,.prose-sm hr+*{margin-top:0}.prose-sm table{font-size:.8571429em;line-height:1.5}.prose-sm thead th{padding-right:1em;padding-bottom:.6666667em;padding-left:1em}.prose-sm thead th:first-child{padding-left:0}.prose-sm thead th:last-child{padding-right:0}.prose-sm tbody td{padding:.6666667em 1em}.prose-sm tbody td:first-child{padding-left:0}.prose-sm tbody td:last-child{padding-right:0}.prose-sm>:first-child{margin-top:0}.prose-sm>:last-child{margin-bottom:0}.dark .dark\:prose-light{color:#e4e4e7}.dark .dark\:prose-light a{color:#fff}.dark .dark\:prose-light a:hover{color:#c084fc}.dark .dark\:prose-light strong{color:#fff}.dark .dark\:prose-light ol>li:before{color:#a1a1aa}.dark .dark\:prose-light ul>li:before{background-color:#52525b}.dark .dark\:prose-light hr{border-color:#e4e4e7}.dark .dark\:prose-light blockquote{color:#e4e4e7;border-left-color:#52525b}.dark .dark\:prose-light h1,.dark .dark\:prose-light h2,.dark .dark\:prose-light h3,.dark .dark\:prose-light h4{color:#fff}.dark .dark\:prose-light figure figcaption{color:#a1a1aa}.dark .dark\:prose-light a code,.dark .dark\:prose-light code{color:#fff}.dark .dark\:prose-light thead{color:#fff;border-bottom-color:#a1a1aa}.dark .dark\:prose-light tbody tr{border-bottom-color:#52525b}kbd{--tw-text-opacity:1;color:rgba(39,39,42,var(--tw-text-opacity));font-size:.875rem;line-height:1.25rem;--tw-bg-opacity:1;background-color:rgba(244,244,245,var(--tw-bg-opacity));--tw-border-opacity:1;border-color:rgba(161,161,170,var(--tw-border-opacity));border-width:1px;border-radius:.125rem;--tw-shadow:0 1px 3px 0 rgba(0,0,0,0.1),0 1px 2px 0 rgba(0,0,0,0.06);box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow);padding-left:.25rem;padding-right:.25rem}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.my-3{margin-top:.75rem;margin-bottom:.75rem}.my-auto{margin-top:auto;margin-bottom:auto}.mt-1{margin-top:.25rem}.mr-2{margin-right:.5rem}.mr-3{margin-right:.75rem}.mr-4{margin-right:1rem}.mr-6{margin-right:1.5rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-5{margin-bottom:1.25rem}.mb-8{margin-bottom:2rem}.mb-10{margin-bottom:2.5rem}.mb-14{margin-bottom:3.5rem}.mb-16{margin-bottom:4rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.inline{display:inline}.flex{display:flex}.table{display:table}.grid{display:grid}.h-3{height:.75rem}.h-5{height:1.25rem}.min-h-screen{min-height:100vh}.w-3{width:.75rem}.w-5{width:1.25rem}.w-1\/2{width:50%}.max-w-sm{max-width:24rem}.max-w-2xl{max-width:42rem}.flex-none{flex:none}@keyframes spin{to{transform:rotate(1turn)}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes pulse{50%{opacity:.5}}@keyframes bounce{0%,to{transform:translateY(-25%);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes wiggle{0%,to{transform:rotate(0deg)}25%,75%{transform:rotate(15deg)}50%{transform:rotate(-15deg)}}.hover\:animate-wiggle:hover{animation:wiggle 3s ease-in-out infinite}.grid-flow-col{grid-auto-flow:column}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.justify-items-stretch{justify-items:stretch}.self-center{align-self:center}.rounded-lg{border-radius:.5rem}.border-4{border-width:4px}.border-b-4{border-bottom-width:4px}.border-b{border-bottom-width:1px}.dark .dark\:border-b-4{border-bottom-width:4px}.border-solid{border-style:solid}.border-dashed{border-style:dashed}.hover\:border-solid:hover{border-style:solid}.dark .dark\:border-double{border-style:double}.border-blue-800{--tw-border-opacity:1;border-color:rgba(30,64,175,var(--tw-border-opacity))}.dark .dark\:border-purple-400{--tw-border-opacity:1;border-color:rgba(192,132,252,var(--tw-border-opacity))}.bg-green-800{--tw-bg-opacity:1;background-color:rgba(22,101,52,var(--tw-bg-opacity))}.dark .dark\:bg-gray-800{--tw-bg-opacity:1;background-color:rgba(39,39,42,var(--tw-bg-opacity))}.fill-current{fill:currentColor}.object-cover{object-fit:cover}.p-6{padding:1.5rem}.p-10{padding:2.5rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.py-12{padding-top:3rem;padding-bottom:3rem}.py-24{padding-top:6rem;padding-bottom:6rem}.pr-5{padding-right:1.25rem}.pb-4{padding-bottom:1rem}.pl-5{padding-left:1.25rem}.text-center{text-align:center}.text-right{text-align:right}.align-middle{vertical-align:middle}.text-xs{font-size:.75rem;line-height:1rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-5xl{font-size:3rem;line-height:1}.font-thin{font-weight:100}.font-light{font-weight:300}.font-semibold{font-weight:600}.font-bold{font-weight:700}.italic{font-style:italic}.tracking-tighter{letter-spacing:-.05em}.text-white{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.text-gray-400{--tw-text-opacity:1;color:rgba(161,161,170,var(--tw-text-opacity))}.text-gray-600{--tw-text-opacity:1;color:rgba(82,82,91,var(--tw-text-opacity))}.text-gray-700{--tw-text-opacity:1;color:rgba(63,63,70,var(--tw-text-opacity))}.text-gray-800{--tw-text-opacity:1;color:rgba(39,39,42,var(--tw-text-opacity))}.hover\:text-black:hover{--tw-text-opacity:1;color:rgba(0,0,0,var(--tw-text-opacity))}.hover\:text-purple-400:hover{--tw-text-opacity:1;color:rgba(192,132,252,var(--tw-text-opacity))}.group:hover .group-hover\:text-black{--tw-text-opacity:1;color:rgba(0,0,0,var(--tw-text-opacity))}.dark .dark\:text-white{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.dark .dark\:text-purple-400{--tw-text-opacity:1;color:rgba(192,132,252,var(--tw-text-opacity))}.dark .dark\:text-gray-300{--tw-text-opacity:1;color:rgba(212,212,216,var(--tw-text-opacity))}.dark .dark\:text-gray-400{--tw-text-opacity:1;color:rgba(161,161,170,var(--tw-text-opacity))}.dark .dark\:hover\:text-white:hover,.dark .group:hover .dark\:group-hover\:text-white{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.hover\:underline:hover,.underline{text-decoration:underline}*,:after,:before{--tw-shadow:0 0 transparent}.shadow-inner{--tw-shadow:inset 0 2px 4px 0 rgba(0,0,0,0.06);box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow)}*,:after,:before{--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,0.5);--tw-ring-offset-shadow:0 0 transparent;--tw-ring-shadow:0 0 transparent}.transition-colors{transition-property:background-color,border-color,color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-300{transition-duration:.3s}@media (min-width:640px){.sm\:px-6{padding-left:1.5rem;padding-right:1.5rem}.sm\:py-12{padding-top:3rem;padding-bottom:3rem}.sm\:text-sm{font-size:.875rem;line-height:1.25rem}}@media (min-width:768px){.md\:text-sm{font-size:.875rem;line-height:1.25rem}}@media (min-width:1024px){.lg\:mx-4{margin-left:1rem;margin-right:1rem}.lg\:max-w-3xl{max-width:48rem}.lg\:px-16{padding-left:4rem;padding-right:4rem}.lg\:py-16{padding-top:4rem;padding-bottom:4rem}.lg\:text-base{font-size:1rem;line-height:1.5rem}.lg\:text-2xl{font-size:1.5rem;line-height:2rem}.lg\:text-8xl{font-size:5rem}}@media (min-width:1280px){.xl\:mb-8{margin-bottom:2rem}.xl\:px-0{padding-left:0;padding-right:0}}@media (min-width:1536px){.\32xl\:max-w-4xl{max-width:56rem}}</style><meta name="generator" content="Gatsby 2.32.11"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><title data-react-helmet="true">Memoization in Ruby | TroyProg</title><meta data-react-helmet="true" content="Meomization in Ruby is a pretty simple to accomplish. You basically use an instance variable and the ||= operator: How ||= works The ||= operator is equivalent…" name="description"/><meta data-react-helmet="true" content="Memoization in Ruby" property="og:title"/><meta data-react-helmet="true" content="Meomization in Ruby is a pretty simple to accomplish. You basically use an instance variable and the ||= operator: How ||= works The ||= operator is equivalent…" property="og:description"/><meta data-react-helmet="true" content="website" property="og:type"/><meta data-react-helmet="true" content="summary" name="twitter:card"/><meta data-react-helmet="true" content="Troy Rosenberg (@tmr08c)" name="twitter:creator"/><meta data-react-helmet="true" content="Memoization in Ruby" name="twitter:title"/><meta data-react-helmet="true" content="Meomization in Ruby is a pretty simple to accomplish. You basically use an instance variable and the ||= operator: How ||= works The ||= operator is equivalent…" name="twitter:description"/><link rel="icon" href="/favicon-32x32.png?v=b64c80c1072b59caa8281fdd06dd9925" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=b64c80c1072b59caa8281fdd06dd9925"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=b64c80c1072b59caa8281fdd06dd9925"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=b64c80c1072b59caa8281fdd06dd9925"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=b64c80c1072b59caa8281fdd06dd9925"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=b64c80c1072b59caa8281fdd06dd9925"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=b64c80c1072b59caa8281fdd06dd9925"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=b64c80c1072b59caa8281fdd06dd9925"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=b64c80c1072b59caa8281fdd06dd9925"/><link href="https://fonts.googleapis.com/css2?family=Chewy&amp;display=swap" rel="stylesheet"/><link as="script" rel="preload" href="/webpack-runtime-bbbb8b0884aed38140e0.js"/><link as="script" rel="preload" href="/framework-741ade27086b2708e961.js"/><link as="script" rel="preload" href="/styles-55e82d6ff5158c00b714.js"/><link as="script" rel="preload" href="/app-58da2f987d5d0aa08217.js"/><link as="script" rel="preload" href="/5265e14917706ae774eeedcf8740d96f07c711c9-27c52e43e6f8159c1a17.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-tsx-0bd3f76b3b3ee9c184dc.js"/><link as="fetch" rel="preload" href="/page-data/2015/03/memoization-in-ruby/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3128451518.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3649515864.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>!function(e,a,t){function o(e){document.body.classList.add(e?"dark":"light"),document.body.classList.remove(e?"light":"dark")}var r=window.matchMedia("(prefers-color-scheme: dark)"),d="(prefers-color-scheme: dark)"===r.media,s=null;try{s=localStorage.getItem("darkMode")}catch(e){}var c=null!==s;if(c&&(s=JSON.parse(s)),c)o(s);else if(d)o(r.matches),localStorage.setItem("darkMode",r.matches);else{var l=document.body.classList.contains("dark");localStorage.setItem("darkMode",JSON.stringify(l))}}();</script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="dark:bg-gray-800 dark:text-white"><nav class="flex items-center justify-between flex-wrap bg-green-800 px-6 py-12 mb-5 text-white dark:bg-gray-800 dark:border-b-4 dark:border-double dark:border-purple-400 dark:text-purple-400"><div class="flex flex-no-shrink"><a class="font-semibold text-4xl tracking-tighter hover:underline hover:animate-wiggle" href="/">TroyProg</a></div><div class="justify-end flex mr-4 text-xl items-center"><a class="mr-6 hover:text-black dark:hover:text-white" href="/talks">Talks</a><a class="mr-6 hover:text-black dark:hover:text-white" href="/blog">Blog</a><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" color="white" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" style="cursor:pointer;transform:rotate(90deg)"><mask id="circle-mask-0"><rect x="0" y="0" width="100%" height="100%" fill="white"></rect><circle style="cx:100%;cy:0%" r="9" fill="black"></circle></mask><circle cx="12" cy="12" fill="white" style="r:5px" mask="url(#circle-mask-0)"></circle><g stroke="currentColor" style="opacity:1"><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></g></svg></div></nav><main class="min-h-screen mx-auto px-4 py-8 max-w-2xl sm:px-6 sm:py-12 lg:max-w-3xl lg:py-16 2xl:max-w-4xl xl:px-0"><article class="prose prose-sm sm:prose lg:prose-lg xl:prose-xl dark:prose-light"><h1>Memoization in Ruby</h1><div><p>Meomization in Ruby is a pretty simple to accomplish.</p>
<p>You basically use an instance variable and the <code>||=</code> operator:</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="0"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">memoized_value</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">@memoized_value</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">||=</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> long_running_value_getter</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span></code></pre>
<h2 id="how--works" style="position:relative;"><a href="#how--works" aria-label="how  works permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How <code>||=</code> works</h2>
<p>The <code>||=</code> operator is equivalent to</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="1"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">memoized_value</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">@memoized_value</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">||</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">@memoized_value</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">=</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> long_running_value_getter</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span></code></pre>
<p>which can be thought of as</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="2"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">memoized_value</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">if</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">@memoized_value</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">@memoized_value</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">else</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">@memoized_value</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">=</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> long_running_value_getter</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span></code></pre>
<p>the <code>||</code> and <code>if</code> checks work well with Ruby because an uninitialized instance variable will return <code>nil</code></p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="3"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">&gt;&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">@variable</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3">#=&gt; nil</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">&gt;&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">@variable</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">=</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">&#39;value&#39;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3">#=&gt; &quot;value&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">&gt;&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">@variable</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3">#=&gt; &quot;value&quot;</span></span></span></code></pre>
<p> which is falsey</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="4"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">describe </span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">NilClass</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> subject { </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">nil</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> it </span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">&#39;should be false&#39;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">   expect(subject).to be_falsy</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">Finished</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">in</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0.00151</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> seconds (files took </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0.11127</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> seconds to </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">load</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">1</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> example, </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> failures</span></span></span></code></pre>
<h2 id="how-it-helps" style="position:relative;"><a href="#how-it-helps" aria-label="how it helps permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How it helps</h2>
<p>In the above example I am setting the instance variable equal to the value of some fictitious <code>long_running_value_getter</code> method. The name of the made up method is intentional. Memoization is useful as a way to cache the value of method that has the potential to take some significant amount of time to run.</p>
<h3 id="a-dramatized-example" style="position:relative;"><a href="#a-dramatized-example" aria-label="a dramatized example permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A dramatized example</h3>
<p>Let's say that this is the definition of our <code>long_running_value_getter</code> method</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="5"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">long_running_value_getter</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">sleep</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">5</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  (</span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">1</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">..</span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">10_000</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">).to_a</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span></code></pre>
<p>if you only need to use the result of <code>long_running_value_getter</code> once you're fine setting it to a variable within the method call and using it but the problem comes in when you are using it multiple times across, multiple methods.</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="6"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">class</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-9 grvsc-tJmpaV-9">NoMemo</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">call</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    evens </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">+</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> odds</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">evens</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    long_running_value_getter.</span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">select</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> { |</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">v</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">| v </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">%</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">2</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">==</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">odds</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    long_running_value_getter.</span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">select</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> { |</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">v</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">| v </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">%</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">2</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">!=</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">private</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">long_running_value_getter</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">sleep</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">5</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    (</span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">1</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">..</span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">10_000</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">).to_a</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span></code></pre>
<p>this will end up calling the <code>long_running_value_getter</code> multiple times.</p>
<p>With memoization we will only need to call the <code>long_running_value_getter</code> once.</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="7"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">class</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-9 grvsc-tJmpaV-9">MoMemo</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">call</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    evens </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">+</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> odds</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">evens</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    values.</span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">select</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> { |</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">v</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">| v </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">%</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">2</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">==</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">odds</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    values.</span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">select</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> { |</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">v</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">| v </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">%</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">2</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">!=</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">private</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">values</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">@values</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">||=</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> long_running_value_getter</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">long_running_value_getter</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">sleep</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">5</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    (</span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">1</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">..</span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">10_000</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">).to_a</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span></code></pre>
<p>Notice that the memoization is done in the <code>values</code> method and we now use <code>values</code> in both <code>evens</code> and <code>odds</code> instead of <code>long_running_value_getter</code>.</p>
<p>We can take a look at the benchmarks to see the time difference</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="8"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-9 grvsc-tJmpaV-9">Benchmark</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">.bmbm </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">do</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> |</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">x</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">|</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  x.report(</span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">&#39;No memoization&#39;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">) { </span><span class="grvsc-t564vY-9 grvsc-tJmpaV-9">NoMemo</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">.</span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">new</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">.call }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  x.report(</span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">&#39;Memoization&#39;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">) { </span><span class="grvsc-t564vY-9 grvsc-tJmpaV-9">MoMemo</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">.</span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">new</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">.call }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">Rehearsal</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">--------------------------------------------------</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">No</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> memoization   </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0.010000</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">   </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0.000000</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">   </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0.010000</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> ( </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">10.006714</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">Memoization</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">      </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0.000000</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">   </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0.000000</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">   </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0.000000</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> (  </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">5.004335</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">-----------------------------------------</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">total:</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">.010000sec</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">                     user     </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">system</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">      total        real</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">No</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> memoization   </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0.000000</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">   </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0.000000</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">   </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0.000000</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> ( </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">10.012453</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">Memoization</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">      </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0.000000</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">   </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0.000000</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">   </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">0.000000</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> (  </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">5.001990</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">)</span></span></span></code></pre>
<p>The results are pretty obvious. Since, for the effect of having a long running process, we have a <code>sleep 5</code> in the <code>long_running_value_getter</code> method, the bulk of the time would be related to that five seconds of sleeping. The non-memoized version had to do this twice and as a result has a runtime of about 10 seconds (2 calls * 5 seconds) while the memoized version only had to do this once so it has a run time of about 5 seconds.</p>
<h3 id="potential-pitfalls" style="position:relative;"><a href="#potential-pitfalls" aria-label="potential pitfalls permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Potential Pitfalls</h3>
<p>You want to make sure when you are working with memoized values that you use non-destructive methods (in Ruby these generally have end with a bang <code>!</code>), that is, you do not want to use methods that change the memozied value.</p>
<p>Let's take a look at the following example.</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="9"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">Cat</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">=</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-9 grvsc-tJmpaV-9">Struct</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">.</span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">new</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">(</span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">:type</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">, </span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">:sex</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">, </span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">:featured</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">) </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">to_s</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">&quot;</span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">#{</span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">sex</span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">}</span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">, </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">#{</span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">type</span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">}</span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">class</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-9 grvsc-tJmpaV-9">CatSeller</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">newsletter</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">%Q(</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">      We have some fantastic cats for sale this month!</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">      &lt;h1&gt;</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">Featured</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">Cats</span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">&lt;/</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">h1</span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">      </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3">#{featured_cats.map { |cat| &quot;&lt;li&gt;#{cat}&lt;/li&gt;&quot; }.join(&quot;\n&quot;)}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">      </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">&lt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">h1</span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">&gt;</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">All</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">Cats</span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">&lt;/</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">h1</span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">      </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3">#{cats.join(&#39;,&#39;)}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    )</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">featured_cats</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    cats.select! { |</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">cat</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">| cat.featured }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">cats</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">@cats</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">||=</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> fetch_cats</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3"># We will pretend we are getting this from an API or DB</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">fetch_cats</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    [</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">      </span><span class="grvsc-t564vY-9 grvsc-tJmpaV-9">Cat</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">.</span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">new</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">(</span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">&#39;Lion&#39;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">, </span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">&#39;Male&#39;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">, </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">false</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">      </span><span class="grvsc-t564vY-9 grvsc-tJmpaV-9">Cat</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">.</span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">new</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">(</span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">&#39;Leopard&#39;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">, </span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">&#39;Female&#39;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">, </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">false</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">      </span><span class="grvsc-t564vY-9 grvsc-tJmpaV-9">Cat</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">.</span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">new</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">(</span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">&#39;Snow Leopard&#39;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">, </span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">&#39;Male&#39;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">, </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">true</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">      </span><span class="grvsc-t564vY-9 grvsc-tJmpaV-9">Cat</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">.</span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">new</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">(</span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">&#39;Mountain Lion&#39;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">, </span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">&#39;Male&#39;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">, </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">true</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">      </span><span class="grvsc-t564vY-9 grvsc-tJmpaV-9">Cat</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">.</span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">new</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">(</span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">&#39;Tiger&#39;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">, </span><span class="grvsc-t564vY-7 grvsc-tJmpaV-7">&#39;Female&#39;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">, </span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">false</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    ]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span></code></pre>
<p>We have a cat seller that creates a newsletter to send out to potential buyers. The newsletter headlines featured cats at the tops then lists all available cats.</p>
<p>If we run this we see output like the following.</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="html" data-index="10"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">We have some fantastic cats for sale this month!</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;h1&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">Featured Cats</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;/h1&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;li&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">Male, Snow Leopard</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;/li&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;li&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">Male, Mountain Lion</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;/li&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;h1&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">All Cats</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;/h1&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;li&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">Male, Snow Leopard</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;/li&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;li&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">Male, Mountain Lion</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;/li&gt;</span></span></span></code></pre>
<p>We end up only seeing the featured cats in both places.</p>
<p>Let's take a look at why this happens.</p>
<p>When we first create our <code>CatSeller</code> it seems to have all of its cats</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="11"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">&gt;&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> cat_seller.cats</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">=&gt; [</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3">#&lt;struct Cat type=&quot;Lion&quot;, sex=&quot;Male&quot;, featured=false&gt;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3">#&lt;struct Cat type=&quot;Leopard&quot;, sex=&quot;Female&quot;, featured=false&gt;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3">#&lt;struct Cat type=&quot;Snow Leopard&quot;, sex=&quot;Male&quot;, featured=true&gt;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3">#&lt;struct Cat type=&quot;Mountain Lion&quot;, sex=&quot;Male&quot;, featured=true&gt;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3">#&lt;struct Cat type=&quot;Tiger&quot;, sex=&quot;Female&quot;, featured=false&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">]</span></span></span></code></pre>
<p>When we send out <code>CatSellert</code> the <code>featured_cats</code> message</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="12"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">&gt;&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> cat_seller.featured_cats</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">=&gt; [</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3">#&lt;struct Cat type=&quot;Snow Leopard&quot;, sex=&quot;Male&quot;, featured=true&gt;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3">#&lt;struct Cat type=&quot;Mountain Lion&quot;, sex=&quot;Male&quot;, featured=true&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">]</span></span></span></code></pre>
<p>we receive an array of only featured cats, so this method it working correctly.</p>
<p>However, if we check on our <code>cats</code> again only the featured ones are there</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="13"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">&gt;&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> cat_seller.cats</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">=&gt; [</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3">#&lt;struct Cat type=&quot;Snow Leopard&quot;, sex=&quot;Male&quot;, featured=true&gt;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3">#&lt;struct Cat type=&quot;Mountain Lion&quot;, sex=&quot;Male&quot;, featured=true&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">]</span></span></span></code></pre>
<p>when we look in our <code>featured_cats</code> method</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="14"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">featured_cats</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  cats.select! { |</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">cat</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">| cat.featured }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span></code></pre>
<p>we see it uses <a href="http://ruby-doc.org/core-2.2.0/Array.html#method-i-select-21" target="_blank" rel="nofollow noopener noreferrer"><code>select!</code></a> which <strong>deletes</strong> the elements that are not featured, changing the underlying <code>cats</code> array.</p>
<p>Instead we would want to use the non-destructive or "safe" version, <code>select</code> without the <code>!</code></p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="15"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">featured_cats</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  cats.</span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">select</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> { |</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">cat</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">| cat.featured }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span></code></pre>
<p>now our result keeps our all of our cats around</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="html" data-index="16"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">We have some fantastic cats for sale this month!</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;h1&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">Featured Cats</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;/h1&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">Male, Snow Leopard</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">Male, Mountain Lion</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;h1&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">All Cats</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;/h1&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;li&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">Male, Lion</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;/li&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;li&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">Female, Leopard</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;/li&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;li&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">Male, Snow Leopard</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;/li&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;li&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">Male, Mountain Lion</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;/li&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;li&gt;</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">Female, Tiger</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">&lt;/li&gt;</span></span></span></code></pre>
<h3 id="reducing-importance-of-ordering" style="position:relative;"><a href="#reducing-importance-of-ordering" aria-label="reducing importance of ordering permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reducing Importance of Ordering</h3>
<p>Generally when you see reference to <a href="http://en.wikipedia.org/wiki/Connascence_%28computer_programming%29#Connascence_of_Position_.28CoP.29" target="_blank" rel="nofollow noopener noreferrer">Connascence of Position</a> it references the position of arguments in a function or method. Memoization can also reduce the requirements for methods to be called in a certain position. There is probably a properly named concept for this but since I do not know the name we will consider it an example of Connascence of Position.</p>
<p>Without memoization we will either have to call the same method that is either computationally or temporally expensive multiple times:</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="17"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">class</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-9 grvsc-tJmpaV-9">TwitterFeed</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">display</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    display_posts</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    display_top_posters</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">display_posts</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    posts </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">=</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> recent_posts</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3"># logic to display posts</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">display_top_posters</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    posts </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">=</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> recent_posts</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3"># use post info to find most prolific posters</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">recent_posts</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3"># fetch recent posts from the API</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span></code></pre>
<p> which, like shown in the earlier example, will hurt performance.</p>
<p> Alternatively we will have to make sure we call the method early enough to pass the value around where we need it (and remember to pass the value around):</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="18"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">class</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-9 grvsc-tJmpaV-9">TwitterFeed</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">display</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    posts </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">=</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> recent_posts</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    display_posts(posts)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    display_top_posters(posts)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">display_posts</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">(</span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">posts</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3"># logic to display posts</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">display_top_posters</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">(</span><span class="grvsc-t564vY-4 grvsc-tJmpaV-4">posts</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3"># use post info to find most prolific posters</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">recent_posts</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3"># fetch recent posts from the API</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span></code></pre>
<p>The requirement to call a method at a particular time makes the class difficult to use due to lack of flexibility. In the above example if you just wanted to display the posts or the list of top posters, say, from the command line, you would somehow have to have tweets to pass in which would require you to call and store <code>recent_posts</code> and pass in the return value to future calls. The class is set to run in a procedural manner that does not allow for the flexibility of an Object Oriented design.</p>
<p>If you have the same example using memoization</p>
<pre class="grvsc-container tomorrow grvsc-ps-tJmpaV" data-language="ruby" data-index="19"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">class</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-9 grvsc-tJmpaV-9">TwitterFeed</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">display</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    display_posts</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    display_top_posters</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">recent_posts</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3"># fetch recent posts from the API</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">@recent_posts</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-6 grvsc-tJmpaV-6">||=</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-9 grvsc-tJmpaV-9">Twitter</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">.tweets</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">display_posts</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3"># logic to display posts</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    recent_posts.each { |</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">post</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">| </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">puts</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> post }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">def</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">display_top_posters</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    </span><span class="grvsc-t564vY-3 grvsc-tJmpaV-3"># use post info to find most prolific posters</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">    recent_posts.top_posters.each { |</span><span class="grvsc-t564vY-8 grvsc-tJmpaV-8">poster</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">| </span><span class="grvsc-t564vY-10 grvsc-tJmpaV-10">puts</span><span class="grvsc-t564vY-1 grvsc-tJmpaV-1"> poster.name }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-1 grvsc-tJmpaV-1">  </span><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t564vY-11 grvsc-tJmpaV-11">end</span></span></span></code></pre>
<p>We can now call <code>display_posts</code> or <code>display_top_posters</code> without the need to call <code>recent_posts</code> first because they can call <code>recent_posts</code> within their method definitions and only incur the cost of fetching the tweets if it is the first time.</p>
<h2 id="conclusion" style="position:relative;"><a href="#conclusion" aria-label="conclusion permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2>
<p>If your class has data that is computationally expensive to process or takes a long time to fetch and this data is used throughout methods in the class, you should consider using memoization. While there are things to be concerned about, such as avoiding manipulating the data directly or keeping around a large chunk of data in memory, I find it to almost always pay off.</p>
<p>If you're unsure of the payoff try out some benchmarks and see!</p>
<style class="grvsc-styles">
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line > * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: ' ';
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {
    content: ' ';
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
  .tomorrow {
    background-color: #FFFFFF;
    color: #4D4D4C;
  }
  .tomorrow .grvsc-t564vY-11 { color: #8959A8; }
  .tomorrow .grvsc-t564vY-1 { color: #4D4D4C; }
  .tomorrow .grvsc-t564vY-10 { color: #4271AE; }
  .tomorrow .grvsc-t564vY-8 { color: #C82829; }
  .tomorrow .grvsc-t564vY-6 { color: #3E999F; }
  .tomorrow .grvsc-t564vY-3 { color: #8E908C; }
  .tomorrow .grvsc-t564vY-7 { color: #718C00; }
  .tomorrow .grvsc-t564vY-4 { color: #F5871F; }
  .tomorrow .grvsc-t564vY-9 { color: #C99E00; }
  .tomorrow .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));
  }
  body.dark .grvsc-ps-tJmpaV {
    background-color: #1D1F21;
    color: #C5C8C6;
  }
  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-11 { color: #B294BB; }
  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-1 { color: #C5C8C6; }
  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-10 { color: #81A2BE; }
  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-8 { color: #CC6666; }
  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-6 { color: #8ABEB7; }
  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-3 { color: #969896; }
  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-7 { color: #B5BD68; }
  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-4 { color: #DE935F; }
  body.dark .grvsc-ps-tJmpaV .grvsc-tJmpaV-9 { color: #F0C674; }
  body.dark .grvsc-ps-tJmpaV .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));
  }
</style></div></article><div class="flex justify-end text-xs md:text-sm text-gray-600 font-light italic mb-2 dark:text-gray-400"><time dateTime="March 08, 2015">March 08, 2015</time></div><hr class="mb-3"/><div class="text-center font-light text-sm md:text-sm text-gray-600 italic mb-10 xl:mb-8 dark:text-gray-300">Notice something wrong? Please consider<!-- --> <a href="https://github.com/tmr08c/tmr08c.github.io/tree/develop/content/blog//2015/03/memoization-in-ruby/index.md" target="_blank" rel="noopener noreferrer" class="underline hover:text-purple-400">proposing an edit</a> <!-- -->or<!-- --> <a href="https://github.com/tmr08c/tmr08c.github.io/issues" target="_blank" rel="noopener noreferrer" class="underline hover:text-purple-400">opening an issue</a>.</div><div class="text-gray-600 grid grid-flow-col grid-cols-3 justify-items-stretch align-middle items-center text-xs sm:text-sm lg:text-base dark:text-gray-300"><a rel="prev" class="flex flex-row hover:text-purple-400" href="/2015/03/struct-as-json/"><span class="self-center flex-none mr-2">←</span><span>Return Struct as JSON</span></a><a class="text-center hover:text-purple-400" href="/blog">- All Posts -</a><a rel="next" class="flex flex-row justify-right hover:text-purple-400" href="/2015/03/anatomy-of-ruby-class/"><span class="text-right">The Anatomy of a Ruby Class</span><span class="self-center flex-none ml-2">→</span></a></div></main><div class="flex justify-between py-4 px-1 bg-green-800 text-white dark:bg-gray-800 dark:text-purple-400"><div class="flex flex-col pl-5 my-auto"><a class="hover:text-black dark:hover:text-white" href="/">Home</a><div class="group"><a href="https://github.com/tmr08c/" target="blank" class="group-hover:text-black dark:group-hover:text-white"><svg viewBox="0 0 16 16" class="w-5 h-5 inline fill-current"><path d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"></path></svg><span class="text-sm ml-1 group-hover:text-black dark:group-hover:text-white">@tmr08c</span></a></div></div><div class="flex flex-col items-end pr-5 my-auto"><a class="hover:text-black dark:hover:text-white" href="/talks">Talks</a><div class="flex items-center"><a class="mr-3 hover:text-black dark:hover:text-white" href="/rss.xml"><svg viewBox="0 0 461.432 461.432" class="h-3 w-3 fill-current"><defs></defs><path d="M125.896 398.928c0 33.683-27.308 60.999-61.022 60.999-33.684 0-61.006-27.316-61.006-60.999 0-33.729 27.322-61.038 61.006-61.038 33.714 0 61.022 27.308 61.022 61.038zM0 229.636c0 8.441 6.606 15.379 15.036 15.809 60.318 3.076 100.885 25.031 138.248 62.582 36.716 36.864 60.071 89.759 64.082 137.769.686 8.202 7.539 14.524 15.77 14.524h56.701c4.344 0 8.498-1.784 11.488-4.935a15.852 15.852 0 004.333-11.729c-8.074-158.152-130.669-278.332-289.013-286.23a15.846 15.846 0 00-11.709 4.344A15.848 15.848 0 000 173.247v56.389z"></path><path d="M0 73.411c0 8.51 6.713 15.482 15.216 15.819 194.21 7.683 350.315 161.798 358.098 355.879.34 8.491 7.32 15.208 15.818 15.208h56.457c4.297 0 8.408-1.744 11.393-4.834a15.857 15.857 0 004.441-11.552C453.181 199.412 261.024 9.27 16.38 1.121A15.844 15.844 0 004.838 5.568 15.842 15.842 0 000 16.954v56.457z"></path></svg></a><a class="hover:text-black dark:hover:text-white" href="/blog">Blog</a></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2015/03/memoization-in-ruby/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-f89c5f37b65dee400010.js"],"app":["/app-58da2f987d5d0aa08217.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-eec87b46525379af865f.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-c80cf52d870552117fe7.js"],"component---src-pages-blog-tsx":["/component---src-pages-blog-tsx-f80cf169c86e0405b6c0.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-f1d7dccc5989efa5fe38.js"],"component---src-pages-talks-tsx":["/component---src-pages-talks-tsx-1357f575ab66bbcfcbd0.js"],"component---src-templates-blog-post-tsx":["/component---src-templates-blog-post-tsx-0bd3f76b3b3ee9c184dc.js"]};/*]]>*/</script><script src="/polyfill-f89c5f37b65dee400010.js" nomodule=""></script><script src="/component---src-templates-blog-post-tsx-0bd3f76b3b3ee9c184dc.js" async=""></script><script src="/5265e14917706ae774eeedcf8740d96f07c711c9-27c52e43e6f8159c1a17.js" async=""></script><script src="/app-58da2f987d5d0aa08217.js" async=""></script><script src="/styles-55e82d6ff5158c00b714.js" async=""></script><script src="/framework-741ade27086b2708e961.js" async=""></script><script src="/webpack-runtime-bbbb8b0884aed38140e0.js" async=""></script></body></html>